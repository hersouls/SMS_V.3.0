import{j as e}from"./radix-PkTNM-lE.js";import{r as s}from"./vendor-CzXpEsbX.js";import{u as t,b as a,L as r}from"./router-Cv8QkTiH.js";import{H as i}from"./Header-CIDamdo7.js";import{F as n}from"./Footer-Bq7VjlJl.js";import{G as c}from"./GlassCard-7KCV_-aY.js";import{u as l,W as o,c as h}from"./index-tT6ahxMo.js";import{g as d}from"./phaseColors-zzJtI-PF.js";import{H as x,R as m,h as g,n as u,C as f,w,k as p,T as j,x as v,y as N,z as b,G as y,o as k,e as z,F as C,v as S}from"./icons-ojVkv7w_.js";import"./others-B6ceBAQi.js";import"./utils-VH1XAVo5.js";function D(){const{subscriptions:D,settings:L,refreshData:R}=l(),M=t(),A=a(),[U,$]=s.useState(""),[E,I]=s.useState("all"),[T,F]=s.useState("recent"),[K,G]=s.useState("desc"),[H,W]=s.useState("grid"),[q,Y]=s.useState("all"),[B,J]=s.useState(!1);s.useEffect(()=>{var e;(null==(e=A.state)?void 0:e.message)&&M(A.pathname,{replace:!0})},[A.state,M,A.pathname]),s.useEffect(()=>{const e=()=>{window.innerWidth<768&&W("list")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const{filteredSubscriptions:O,statusCounts:P,categories:Q,totalMonthlySpend:V}=s.useMemo(()=>{let e=D.filter(e=>{const s=e.serviceName.toLowerCase().includes(U.toLowerCase())||e.category.toLowerCase().includes(U.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(U.toLowerCase())),t="all"===E||e.status===E,a="all"===q||e.category===q;return s&&t&&a});e.sort((e,s)=>{let t=0;switch(T){case"name":t=e.serviceName.localeCompare(s.serviceName,"ko");break;case"amount":const a="USD"===e.currency?e.amount*L.exchangeRate:e.amount,r="USD"===s.currency?s.amount*L.exchangeRate:s.amount,i="yearly"===e.paymentCycle?a/12:a;t=("yearly"===s.paymentCycle?r/12:r)-i;break;case"paymentDay":t=e.paymentDay-s.paymentDay;break;default:t=new Date(s.createdAt||s.startDate).getTime()-new Date(e.createdAt||e.startDate).getTime()}return"asc"===K?-t:t});const s={all:D.length,active:D.filter(e=>"active"===e.status).length,paused:D.filter(e=>"paused"===e.status).length,cancelled:D.filter(e=>"cancelled"===e.status).length},t=new Map;return D&&Array.isArray(D)&&D.forEach(e=>{t.set(e.category,(t.get(e.category)||0)+1)}),{filteredSubscriptions:e,statusCounts:s,categories:["all",...Array.from(t.keys()).sort()],totalMonthlySpend:D.filter(e=>"active"===e.status).reduce((e,s)=>{const t="USD"===s.currency?s.amount*L.exchangeRate:s.amount;return e+("yearly"===s.paymentCycle?t/12:t)},0)}},[D,U,E,q,T,K,L.exchangeRate]),X=s=>{switch(s){case"active":return e.jsx(f,{size:16,className:"icon-enhanced text-white"});case"paused":return e.jsx(w,{size:16,className:"icon-enhanced text-warning-400"});case"cancelled":return e.jsx(p,{size:16,className:"icon-enhanced text-error-400"});default:return e.jsx(S,{size:16,className:"icon-enhanced text-white-force"})}},Z=e=>{switch(e){case"active":return"활성";case"paused":return"일시정지";case"cancelled":return"해지";default:return"알 수 없음"}},_=e=>{switch(e){case"active":return"bg-success-500/20 text-white border-success-500/30";case"paused":return"bg-warning-500/20 text-warning-300 border-warning-500/30";case"cancelled":return"bg-error-500/20 text-error-300 border-error-500/30";default:return"bg-white/10 text-white/70 border-white/20"}},ee=e=>{const s="USD"===e.currency?e.amount*L.exchangeRate:e.amount;return"yearly"===e.paymentCycle?s/12:s};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(i,{}),e.jsx("main",{className:"pt-28 pb-token-xl px-token-md",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-token-xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-token-md",children:[e.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>M("/dashboard"),className:"hidden md:flex text-white-force hover:text-white hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200",children:[e.jsx(x,{size:16,className:"mr-token-xs icon-enhanced text-white-force"}),"대시보드"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white-force",children:"구독 관리"}),e.jsxs("p",{className:"text-white-force text-sm-ko",children:[D.length,"개의 구독 • 월 ",V.toLocaleString("ko-KR"),"원"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-token-sm",children:[e.jsxs(o,{variant:"ghost",size:"sm",onClick:async()=>{J(!0);try{await R()}catch(e){}finally{J(!1)}},disabled:B,className:"hidden md:flex text-white-force hover:text-white hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200",children:[e.jsx(m,{size:16,className:h("mr-token-xs icon-enhanced text-white-force",B&&"animate-spin")}),"새로고침"]}),e.jsx(r,{to:"/subscriptions/new",children:e.jsxs(o,{variant:"primary",className:"shadow-lg shadow-primary-500/20 hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200 text-white-force",children:[e.jsx(g,{size:16,className:"mr-token-xs icon-enhanced text-white-force"}),"새 구독 추가"]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-token-lg",children:[{key:"all",label:"전체 구독",count:P.all,color:"primary",icon:u,change:null},{key:"active",label:"활성 구독",count:P.active,color:"success",icon:f,change:"+2"},{key:"paused",label:"일시정지",count:P.paused,color:"warning",icon:w,change:null},{key:"cancelled",label:"해지됨",count:P.cancelled,color:"error",icon:p,change:null}].map(s=>{const t=s.icon,a=E===s.key;return e.jsxs(c,{variant:a?"strong":"light",className:h("p-token-lg cursor-pointer transition-all duration-300 hover:border-white/30 hover:scale-105 group hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 focus:outline-none",a&&"ring-1 ring-primary-500/30 shadow-lg"),onClick:()=>I(s.key),children:[e.jsxs("div",{className:"flex items-center justify-between mb-token-sm",children:[e.jsx("div",{className:h("p-token-sm rounded-lg","primary"===s.color&&"bg-primary-500/20","success"===s.color&&"bg-success-500/20","warning"===s.color&&"bg-warning-500/20","error"===s.color&&"bg-error-500/20"),children:e.jsx(t,{size:20,className:h("icon-enhanced","primary"===s.color&&"text-primary-400","success"===s.color&&"text-white-force","warning"===s.color&&"text-warning-400","error"===s.color&&"text-error-400")})}),s.change&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-white-force",children:[e.jsx(j,{size:12,className:"icon-enhanced"}),e.jsx("span",{children:s.change})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-white-force mb-1 group-hover:scale-105 transition-transform",children:s.count}),e.jsx("p",{className:"text-white-force text-sm-ko",children:s.label})]})]},s.key)})}),e.jsx(c,{variant:"strong",className:"p-token-lg",children:e.jsxs("div",{className:"space-y-token-lg",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row gap-token-md",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(v,{size:20,className:"absolute left-token-sm top-1/2 -translate-y-1/2 icon-enhanced text-white-force"}),e.jsx("input",{type:"text",placeholder:"구독명, 카테고리, 태그로 검색...",value:U,onChange:e=>$(e.target.value),className:"w-full pl-12 pr-token-md py-token-sm bg-white/5 border border-white/10 rounded-lg text-white-force placeholder:text-white-force focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 text-base-ko keyboard-navigation"}),U&&e.jsx("button",{onClick:()=>$(""),className:"absolute right-token-sm top-1/2 -translate-y-1/2 text-white-force hover:text-white hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200 touch-target-sm",children:e.jsx(p,{size:16,className:"icon-enhanced"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-token-sm",children:[e.jsx("select",{value:q,onChange:e=>Y(e.target.value),className:"px-token-md py-token-sm bg-white/5 border border-white/10 rounded-lg text-white-force focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all duration-200 text-base-ko",children:Q.map(s=>e.jsx("option",{value:s,className:"bg-gray-800 text-white-force",children:"all"===s?"전체 카테고리":s},s))}),e.jsxs("div",{className:"flex border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("select",{value:T,onChange:e=>F(e.target.value),className:"px-token-md py-token-sm bg-white/5 text-white-force focus:outline-none border-none text-base-ko",children:[e.jsx("option",{value:"recent",className:"bg-gray-800 text-white-force",children:"최근 등록순"}),e.jsx("option",{value:"name",className:"bg-gray-800 text-white-force",children:"이름순"}),e.jsx("option",{value:"amount",className:"bg-gray-800 text-white-force",children:"금액순"}),e.jsx("option",{value:"paymentDay",className:"bg-gray-800 text-white-force",children:"결제일순"})]}),e.jsx("button",{onClick:()=>G("asc"===K?"desc":"asc"),className:"px-token-sm py-token-sm bg-white/5 text-white-force hover:text-white hover:bg-white/10 hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200",children:"asc"===K?e.jsx(N,{size:16,className:"icon-enhanced"}):e.jsx(b,{size:16,className:"icon-enhanced"})})]}),e.jsxs("div",{className:"flex border border-white/10 rounded-lg overflow-hidden",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>W("grid"),className:h("rounded-none border-none hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200","grid"===H?"bg-primary-500 text-white":"bg-white/5 text-white-force hover:text-white hover:bg-white/10"),children:e.jsx(y,{size:16,className:"icon-enhanced"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>W("list"),className:h("rounded-none border-none hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200","list"===H?"bg-primary-500 text-white":"bg-white/5 text-white-force hover:text-white hover:bg-white/10"),children:e.jsx(k,{size:16,className:"icon-enhanced"})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-token-md border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-token-md",children:[e.jsxs("p",{className:"text-white-force text-sm-ko",children:[e.jsxs("span",{className:"text-white-force font-medium",children:[O.length,"개"]})," 구독","all"!==E&&e.jsxs("span",{className:"text-white-force",children:[" • ",Z(E)]}),"all"!==q&&e.jsxs("span",{className:"text-white-force",children:[" • ",q]})]}),O.length>0&&e.jsxs("p",{className:"text-primary-400 text-sm-ko",children:["월 총 ",O.filter(e=>"active"===e.status).reduce((e,s)=>e+ee(s),0).toLocaleString("ko-KR"),"원"]})]}),e.jsx("div",{className:"flex items-center space-x-token-sm",children:(U||"all"!==E||"all"!==q)&&e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>{$(""),I("all"),Y("all")},className:"text-white-force hover:text-white hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200",children:"필터 초기화"})})]})]})}),O.length>0?e.jsx("div",{className:h("grid"===H?"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-token-lg":"space-y-token-sm"),children:O.map(s=>{const t=d({"엔터테인먼트":"shine","음악":"growth","개발":"challenge",AI:"challenge","디자인":"growth","생산성":"beginning","교육":"beginning","피트니스":"challenge","뉴스":"beginning","게임":"shine","기타":"beginning"}[s.category]||"beginning"),a=(e=>{const s=new Date,t=e.paymentDay;let a=new Date(s.getFullYear(),s.getMonth(),t);a<s&&a.setMonth(a.getMonth()+1);const r=a.getTime()-s.getTime();return Math.ceil(r/864e5)})(s),i=ee(s);return e.jsx(c,{variant:"strong",className:h("group hover:border-white/30 transition-all duration-300 hover:scale-105 hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 focus:outline-none","list"===H&&"hover:scale-100 hover:bg-white/5"),children:"grid"===H?e.jsxs("div",{className:"p-token-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-token-lg",children:[e.jsxs("div",{className:"flex items-center space-x-token-sm",children:[e.jsx("div",{className:h("w-12 h-12 rounded-xl flex items-center justify-center text-white font-bold shadow-lg",t.bg),children:s.logoImage?e.jsx("img",{src:s.logoImage,alt:s.serviceName,className:"w-8 h-8 rounded-lg object-cover"}):s.logo||s.serviceName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-white-force truncate group-hover:text-primary-300 transition-colors text-lg-ko",children:s.serviceName}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:h("w-2 h-2 rounded-full",t.bg)}),e.jsx("p",{className:"text-white-force text-sm-ko",children:s.category})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[X(s.status),s.autoRenewal&&"active"===s.status&&e.jsx(m,{size:12,className:"text-white"})]})]}),e.jsxs("div",{className:"space-y-token-sm mb-token-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white-force text-sm-ko",children:"월 지출"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"font-semibold text-white-force",children:[i.toLocaleString("ko-KR"),"원"]}),"yearly"===s.paymentCycle&&e.jsx("p",{className:"text-xs text-warning-400",children:"연간 할인"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white-force text-sm-ko",children:"다음 결제"}),e.jsx("span",{className:h("text-sm-ko font-medium",a<=3?"text-warning-400":a<=7?"text-info-400":"text-white-force"),children:0===a?"오늘":1===a?"내일":`${a}일 후`})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white-force text-sm-ko",children:"상태"}),e.jsx("span",{className:h("px-token-sm py-1 rounded-full text-xs border text-white-force",_(s.status)),children:Z(s.status)})]}),s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-token-sm",children:[s.tags.slice(0,2).map((s,t)=>e.jsxs("span",{className:"px-2 py-0.5 bg-secondary-500/40 border-secondary-400/60 shadow-lg shadow-secondary-500/30 text-white text-xs rounded-full font-semibold border-2",children:["#",s]},t)),s.tags.length>2&&e.jsxs("span",{className:"px-2 py-0.5 bg-white/10 text-white-force text-xs rounded-full",children:["+",s.tags.length-2]})]})]}),e.jsxs("div",{className:"flex space-x-token-xs",children:[e.jsx(r,{to:`/subscriptions/${s.id}`,className:"flex-1",children:e.jsxs(o,{variant:"secondary",size:"sm",className:"w-full hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200 text-white-force",children:[e.jsx(z,{size:14,className:"mr-1 icon-enhanced text-white-force"}),"상세보기"]})}),e.jsx(r,{to:`/subscriptions/${s.id}/edit`,children:e.jsx(o,{variant:"ghost",size:"sm",className:"text-white-force hover:text-white hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200",children:e.jsx(C,{size:14,className:"icon-enhanced"})})})]})]}):e.jsx("div",{className:"p-token-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-token-md flex-1",children:[e.jsx("div",{className:h("w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold flex-shrink-0",t.bg),children:s.logoImage?e.jsx("img",{src:s.logoImage,alt:s.serviceName,className:"w-6 h-6 rounded object-cover"}):s.logo||s.serviceName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-token-sm mb-1",children:[e.jsx("h3",{className:"font-medium text-white-force truncate group-hover:text-primary-300 transition-colors text-lg-ko",children:s.serviceName}),X(s.status),e.jsx("span",{className:h("px-token-xs py-0.5 rounded-full text-xs border text-white-force",_(s.status)),children:Z(s.status)}),s.autoRenewal&&"active"===s.status&&e.jsx(m,{size:12,className:"icon-enhanced text-white-force"})]}),e.jsxs("div",{className:"flex items-center space-x-token-sm text-sm-ko text-white-force",children:[e.jsx("span",{className:h("w-2 h-2 rounded-full",t.bg)}),e.jsx("span",{children:s.category}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["매월 ",s.paymentDay,"일"]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:h(a<=3?"text-warning-400":a<=7?"text-info-400":"text-white-force"),children:0===a?"오늘 결제":1===a?"내일 결제":`${a}일 후 결제`})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-token-lg",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-white-force",children:[i.toLocaleString("ko-KR"),"원"]}),e.jsxs("p",{className:"text-white-force text-sm-ko",children:["월간","yearly"===s.paymentCycle&&" (연간할인)"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(r,{to:`/subscriptions/${s.id}`,children:e.jsx(o,{variant:"secondary",size:"sm",className:"hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200",children:e.jsx(z,{size:14,className:"icon-enhanced"})})}),e.jsx(r,{to:`/subscriptions/${s.id}/edit`,children:e.jsx(o,{variant:"ghost",size:"sm",className:"text-white-force hover:text-white hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200",children:e.jsx(C,{size:14,className:"icon-enhanced"})})})]})]})]})})},s.id)})}):e.jsx(c,{variant:"light",className:"p-token-2xl",children:e.jsxs("div",{className:"text-center max-w-md mx-auto",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary-500/20 to-secondary-500/20 rounded-full flex items-center justify-center mx-auto mb-token-lg",children:U||"all"!==E||"all"!==q?e.jsx(v,{size:40,className:"icon-enhanced text-white-force"}):e.jsx(u,{size:40,className:"icon-enhanced text-white-force"})}),e.jsx("h3",{className:"text-white-force font-semibold mb-token-sm text-xl-ko",children:U||"all"!==E||"all"!==q?"검색 결과가 없습니다":"구독이 없습니다"}),e.jsx("p",{className:"text-white-force text-sm-ko mb-token-lg leading-relaxed",children:U||"all"!==E||"all"!==q?"다른 검색어나 필터 조건을 시도해보세요":"Moonwave에서 첫 번째 구독을 추가하고\n체계적인 구독 관리를 시작해보세요"}),e.jsx("div",{className:"flex justify-center space-x-token-sm",children:U||"all"!==E||"all"!==q?e.jsxs(o,{variant:"secondary",onClick:()=>{$(""),I("all"),Y("all")},className:"hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200 text-white-force",children:[e.jsx(m,{size:16,className:"mr-token-xs icon-enhanced text-white-force"}),"필터 초기화"]}):e.jsx(r,{to:"/subscriptions/new",children:e.jsxs(o,{variant:"primary",className:"shadow-lg shadow-primary-500/20 hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all duration-200 text-white-force",children:[e.jsx(g,{size:16,className:"mr-token-xs icon-enhanced text-white-force"}),"첫 구독 추가하기"]})})})]})})]})}),e.jsx(n,{})]})}export{D as AllSubscriptions};
