# 기능 테스트 계획 (업데이트: 2025-01-25)

## 1. 개요

### 1.1 목적
- Moonwave 구독 관리 시스템의 모든 기능이 요구사항에 맞게 정상 작동하는지 확인
- 사용자 경험의 품질 보장
- 버그 조기 발견 및 수정
- TypeScript 컴파일 에러 수정 후 기능 검증

### 1.2 범위
- 사용자 인증 및 계정 관리 (Supabase Auth)
- 구독 CRUD 작업 (Supabase Database)
- 설정 관리 (사용자 환경설정)
- 알림 시스템 (브라우저 알림)
- 통계 및 대시보드 (실시간 데이터)
- PWA 기능 (오프라인 지원)
- 음악 플레이어 (Background Feature)
- 개발자 도구 (디버깅 모드)

### 1.3 최근 변경사항
- TypeScript strict 모드 활성화
- yearlyTrend 속성 추가
- undefined 접근 오류 수정
- 불필요한 import 정리
- 날짜 처리 개선

## 2. 테스트 환경

### 2.1 브라우저 지원
- Chrome (최신 버전) - 주요 브라우저
- Firefox (최신 버전)
- Safari (최신 버전)
- Edge (최신 버전)

### 2.2 디바이스 지원
- 데스크톱 (1920x1080, 1366x768)
- 태블릿 (768x1024)
- 모바일 (375x667, 414x896)

### 2.3 개발 환경
- Development Mode: `npm run dev`
- Production Build: `npm run build`
- GitHub Pages Deployment

## 3. 테스트 케이스

### 3.1 사용자 인증

#### 3.1.1 회원가입
- **TC-001**: 이메일/비밀번호로 회원가입
  - 전제조건: 메인 페이지 접속 (`/login`)
  - 단계: 
    1. "회원가입" 링크 클릭
    2. 유효한 이메일 입력
    3. 안전한 비밀번호 입력 (최소 6자)
    4. 이름 입력 (선택사항)
    5. "회원가입" 버튼 클릭
  - 예상결과: 이메일 인증 안내 메시지 표시

- **TC-002**: Google OAuth 회원가입
  - 전제조건: 로그인 페이지 접속
  - 단계:
    1. "Google로 로그인" 버튼 클릭
    2. Google 계정 선택
    3. 권한 승인
  - 예상결과: 대시보드로 자동 리다이렉트

- **TC-003**: 이메일 중복 검사
  - 단계: 이미 존재하는 이메일로 회원가입 시도
  - 예상결과: "이미 등록된 이메일입니다" 에러 메시지

#### 3.1.2 로그인
- **TC-004**: 이메일/비밀번호 로그인
  - 전제조건: 기존 계정 존재
  - 단계:
    1. 이메일 입력
    2. 비밀번호 입력
    3. 로그인 버튼 클릭
  - 예상결과: `/dashboard`로 리다이렉트

- **TC-005**: Google OAuth 로그인
  - 예상결과: OAuth 콜백 처리 후 대시보드 이동

- **TC-006**: 잘못된 비밀번호 입력 시 에러 처리
  - 예상결과: "로그인에 실패했습니다" 에러 메시지

- **TC-007**: 세션 유지 확인
  - 단계: 로그인 후 브라우저 새로고침
  - 예상결과: 로그인 상태 유지

#### 3.1.3 로그아웃
- **TC-008**: 로그아웃 기능
  - 단계: 설정 메뉴에서 로그아웃 버튼 클릭
  - 예상결과: 로그인 페이지로 리다이렉트

- **TC-009**: 세션 만료 처리
  - 단계: 만료된 토큰으로 API 요청
  - 예상결과: 자동 로그아웃 후 로그인 페이지 이동

### 3.2 구독 관리

#### 3.2.1 구독 추가
- **TC-010**: 기본 구독 정보 입력
  - 경로: `/subscriptions/new`
  - 필수 필드: 서비스명, 금액, 통화, 결제주기, 결제일
  - 예상결과: 구독 목록에 새 항목 추가

- **TC-011**: 상세 정보 입력
  - 선택 필드: 카테고리, 등급, 태그, 메모, 알림 설정
  - 예상결과: 모든 정보가 구독 상세 페이지에 표시

- **TC-012**: 로고 이미지 업로드
  - 단계: 이미지 파일 선택 및 업로드
  - 예상결과: 썸네일 미리보기 및 저장

- **TC-013**: 서비스 URL 입력
  - 단계: 유효한 URL 입력
  - 예상결과: 링크 클릭 시 새 탭에서 해당 사이트 열림

#### 3.2.2 구독 조회
- **TC-014**: 구독 목록 표시
  - 경로: `/subscriptions`
  - 예상결과: 모든 구독이 카드 형태로 표시

- **TC-015**: 구독 상세 보기
  - 경로: `/subscriptions/:id`
  - 예상결과: 전체 구독 정보 및 편집/삭제 옵션

- **TC-016**: 구독 필터링
  - 단계: 상태별, 카테고리별 필터 적용
  - 예상결과: 필터에 맞는 구독만 표시

#### 3.2.3 구독 수정
- **TC-017**: 기본 정보 수정
  - 경로: `/subscriptions/:id/edit`
  - 예상결과: 수정된 정보가 즉시 반영

- **TC-018**: 결제 정보 수정
  - 단계: 금액, 결제일, 결제주기 변경
  - 예상결과: 통계 및 대시보드 자동 업데이트

#### 3.2.4 구독 삭제
- **TC-019**: 구독 삭제 확인
  - 단계: 삭제 버튼 클릭 → 확인 모달 → 삭제 확인
  - 예상결과: 구독 목록에서 제거, 통계 업데이트

#### 3.2.5 구독 상태 관리
- **TC-020**: 활성 → 일시정지
  - 예상결과: 상태 변경, 결제 예정에서 제외
- **TC-021**: 일시정지 → 활성
- **TC-022**: 활성 → 해지
- **TC-023**: 해지 → 활성 (재활성화)

### 3.3 대시보드 및 통계

#### 3.3.1 대시보드 기본 정보
- **TC-024**: 월간 지출 총액 표시
  - 확인사항: totalMonthly, monthlyTotal 정확성
- **TC-025**: 연간 지출 정보 표시
  - 확인사항: yearlySpendingToDate, yearlyTotal, yearlyTrend
- **TC-026**: 활성 구독 수 표시
- **TC-027**: 결제 예정 구독 표시 (7일 이내)

#### 3.3.2 통계 페이지
- **TC-028**: 카테고리별 통계
  - 경로: `/statistics`
  - 확인사항: categoryBreakdown 데이터 정확성
- **TC-029**: 통화별 통계 (KRW/USD)
- **TC-030**: 결제주기별 통계 (월간/연간/일회성)
- **TC-031**: 알림 통계 (설정된 알림 수)
- **TC-032**: 자동 갱신 통계

#### 3.3.3 월간 트렌드 분석
- **TC-033**: 전월 대비 증감률 (monthlyTrend)
- **TC-034**: 연간 트렌드 (yearlyTrend)
- **TC-035**: 인사이트 데이터 (mostExpensive/cheapest/popular Category)

### 3.4 설정 관리

#### 3.4.1 환율 설정
- **TC-036**: USD 환율 변경
  - 경로: `/settings`
  - 단계: 환율 값 수정 후 저장
  - 예상결과: USD 구독의 KRW 환산액 업데이트

- **TC-037**: 잘못된 환율 입력 시 유효성 검사
  - 단계: 음수 또는 0 입력
  - 예상결과: 에러 메시지 표시

#### 3.4.2 알림 설정
- **TC-038**: 전역 알림 설정 토글
  - 항목: 결제 알림, 가격 변동, 구독 만료
- **TC-039**: 개별 구독 알림 설정
  - 항목: 7일전, 3일전, 당일 알림

#### 3.4.3 사용자 프로필
- **TC-040**: 계정 정보 표시
  - 확인사항: 이메일, 가입일, 이름
- **TC-041**: 계정 통계
  - 확인사항: 총 구독 수, 활성 구독 수, 월간 지출

### 3.5 알림 시스템

#### 3.5.1 브라우저 알림
- **TC-042**: 알림 권한 요청
  - 단계: 첫 방문 시 알림 권한 요청
  - 예상결과: 브라우저 권한 모달 표시

- **TC-043**: 알림 목록 페이지
  - 경로: `/notifications`
  - 확인사항: 시스템 알림, 결제 알림 등 표시

#### 3.5.2 알림 데이터
- **TC-044**: 가상 알림 생성
  - 확인사항: mockData의 알림 데이터 정상 표시
- **TC-045**: 알림 읽음 처리
- **TC-046**: 알림 필터링 (읽음/안읽음, 유형별)

### 3.6 결제 캘린더

#### 3.6.1 캘린더 표시
- **TC-047**: 월간 캘린더 뷰
  - 경로: `/calendar`
  - 확인사항: 결제일에 구독 표시
- **TC-048**: 결제 예정 표시
  - 확인사항: 오늘/이번주/이번달 결제 구독

### 3.7 PWA 기능

#### 3.7.1 설치 기능
- **TC-049**: PWA 설치 프롬프트 표시
  - 조건: HTTPS 환경에서 manifest.json 로드
- **TC-050**: 앱 설치 후 실행
  - 확인사항: 독립 앱 모드 실행
- **TC-051**: 오프라인 기능
  - 단계: 네트워크 차단 후 앱 실행
  - 예상결과: 기본 UI 표시 (제한적 기능)

### 3.8 개발자 도구

#### 3.8.1 디버깅 모드
- **TC-052**: OAuth 디버거
  - 조건: `VITE_DEV_MODE=true`
  - 경로: OAuth 디버거 컴포넌트 표시
- **TC-053**: RLS 디버거
  - 경로: `/rls-debug`
  - 기능: Row Level Security 테스트
- **TC-054**: 데이터 로딩 디버거
  - 경로: `/data-debug`
  - 기능: API 호출 상태 확인

#### 3.8.2 Supabase 테스트
- **TC-055**: Supabase 테스트 대시보드
  - 경로: `/supabase-test`
  - 기능: DB 연결, 테이블 접근 테스트

### 3.9 사용자 경험

#### 3.9.1 반응형 디자인
- **TC-056**: 모바일 레이아웃
  - 확인사항: 터치 친화적 버튼, 적절한 폰트 크기
- **TC-057**: 태블릿 레이아웃
- **TC-058**: 데스크톱 레이아웃

#### 3.9.2 다크 테마
- **TC-059**: 테마 전환
  - 확인사항: 모든 컴포넌트 색상 적용
- **TC-060**: 시스템 테마 감지

#### 3.9.3 음악 플레이어
- **TC-061**: 배경 음악 재생
  - 위치: 화면 상단 중앙
  - 기능: 재생/일시정지, 트랙 변경
- **TC-062**: 볼륨 조절
- **TC-063**: 플레이리스트 탐색

## 4. 테스트 데이터

### 4.1 테스트 계정
```
이메일: her_soul@naver.com
비밀번호: 27879876
Google OAuth: 별도 Google 계정 사용
```

### 4.2 샘플 구독 데이터
```json
[
  {
    "serviceName": "Netflix",
    "amount": 17000,
    "currency": "KRW",
    "paymentCycle": "monthly",
    "paymentDay": 15,
    "category": "엔터테인먼트",
    "tags": ["스트리밍", "영화"],
    "status": "active"
  },
  {
    "serviceName": "Spotify Premium",
    "amount": 9.99,
    "currency": "USD", 
    "paymentCycle": "monthly",
    "paymentDay": 1,
    "category": "엔터테인먼트",
    "tags": ["음악", "스트리밍"],
    "status": "active"
  },
  {
    "serviceName": "Adobe Creative Cloud",
    "amount": 600,
    "currency": "USD",
    "paymentCycle": "yearly",
    "paymentDay": 10,
    "category": "생산성",
    "tags": ["디자인", "작업도구"],
    "status": "active"
  }
]
```

### 4.3 환율 테스트 데이터
```
기본값: 1300 KRW/USD
테스트값: 1250, 1350, 1400
```

## 5. 테스트 실행 절차

### 5.1 사전 준비
1. 개발 서버 실행: `npm run dev`
2. Supabase 프로젝트 연결 확인
3. 환경 변수 설정 확인 (.env.local)
4. 브라우저 개발자 도구 오픈 (네트워크, 콘솔)

### 5.2 테스트 순서
1. **TypeScript 컴파일 확인**: `npm run build`
2. **인증 테스트** (TC-001 ~ TC-009)
3. **구독 CRUD 테스트** (TC-010 ~ TC-023)
4. **대시보드/통계 테스트** (TC-024 ~ TC-035)
5. **설정 테스트** (TC-036 ~ TC-041)
6. **알림 테스트** (TC-042 ~ TC-046)
7. **캘린더 테스트** (TC-047 ~ TC-048)
8. **PWA 테스트** (TC-049 ~ TC-051)
9. **개발자 도구 테스트** (TC-052 ~ TC-055)
10. **UX 테스트** (TC-056 ~ TC-063)

### 5.3 테스트 결과 기록 양식
```
테스트 실행 정보:
- 실행 날짜: 2025-01-25
- 테스터: Claude
- 환경: Chrome 브라우저, Windows 11
- 빌드 버전: SMS V.3.0

테스트 케이스 결과:
TC-XXX | [테스트명] | PASS/FAIL | [비고]
```

## 6. 버그 보고 및 이슈 추적

### 6.1 버그 분류
- **Critical**: 앱 크래시, 데이터 손실, 로그인 불가
- **Major**: 주요 기능 오작동, 성능 문제
- **Minor**: UI 오류, 텍스트 오타, 비주얼 이슈

### 6.2 버그 보고 템플릿
```
버그 ID: BUG-YYYYMMDD-001
제목: [간단한 설명]
심각도: Critical/Major/Minor
우선순위: High/Medium/Low
발견 위치: [페이지/컴포넌트]
재현 단계:
1. [상세 단계]
2. [상세 단계]
예상 결과: [의도된 동작]
실제 결과: [실제 발생한 동작]
환경 정보:
- 브라우저: [버전]
- OS: [버전]
- 화면 해상도: [크기]
추가 정보:
- 콘솔 에러: [에러 메시지]
- 네트워크 상태: [API 응답]
- 스크린샷: [필요시 첨부]
```

## 7. 테스트 완료 기준

### 7.1 기능 테스트 통과 조건
- [ ] 모든 테스트 케이스 실행 완료 (TC-001 ~ TC-063)
- [ ] Critical 버그 0개
- [ ] Major 버그 2개 이하
- [ ] Minor 버그 10개 이하
- [ ] TypeScript 컴파일 에러 0개
- [ ] 빌드 성공 (`npm run build`)

### 7.2 핵심 기능 체크리스트
- [ ] 사용자 인증 (회원가입, 로그인, 로그아웃)
- [ ] 구독 CRUD (추가, 조회, 수정, 삭제)
- [ ] 대시보드 통계 정확성
- [ ] 설정 저장/불러오기
- [ ] PWA 설치 및 오프라인 동작
- [ ] 반응형 디자인 (모바일/태블릿/데스크톱)

### 7.3 성능 기준
- [ ] 초기 로딩 시간 < 3초
- [ ] 페이지 전환 시간 < 1초
- [ ] API 응답 시간 < 2초
- [ ] 메모리 사용량 안정적

### 7.4 호환성 기준
- [ ] Chrome 최신 버전 완전 지원
- [ ] Firefox, Safari, Edge 기본 기능 지원
- [ ] 모바일 브라우저 터치 이벤트 정상 작동

## 8. 테스트 자동화 계획

### 8.1 단위 테스트
- Jest + React Testing Library
- API 함수 테스트
- 유틸리티 함수 테스트

### 8.2 통합 테스트
- Cypress 또는 Playwright
- 사용자 시나리오 자동화
- 크로스 브라우저 테스트

### 8.3 성능 테스트
- Lighthouse CI
- Web Vitals 모니터링
- Bundle 크기 최적화 검증

---

**테스트 계획 버전**: 2.0
**최종 업데이트**: 2025-01-25
**다음 검토 예정일**: 2025-02-01