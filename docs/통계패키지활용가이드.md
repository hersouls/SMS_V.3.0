# SMS V.3.0 í†µê³„ íŒ¨í‚¤ì§€ í™œìš© ê°€ì´ë“œ

## ğŸ“Š ê°œìš”

SMS V.3.0ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ë‹¤ì–‘í•œ í†µê³„ íŒ¨í‚¤ì§€ë“¤ì˜ í™œìš© ë°©ë²•ê³¼ ì˜ˆì œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ¯ ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ëª©ë¡

### ì°¨íŠ¸ ë° ì‹œê°í™” ë¼ì´ë¸ŒëŸ¬ë¦¬

#### 1. Recharts (ê¸°ë³¸)
```bash
npm install recharts
```
- **ìš©ë„**: React ê¸°ë°˜ ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **íŠ¹ì§•**: ê°„ë‹¨í•˜ê³  ì§ê´€ì ì¸ API
- **ì í•©í•œ ì°¨íŠ¸**: ì„ í˜•, ë§‰ëŒ€, ì›í˜•, ì˜ì—­ ì°¨íŠ¸

#### 2. D3.js (ê³ ê¸‰)
```bash
npm install d3 @types/d3
```
- **ìš©ë„**: ë°ì´í„° ê¸°ë°˜ ë¬¸ì„œ ì‹œê°í™”
- **íŠ¹ì§•**: ì™„ì „í•œ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥
- **ì í•©í•œ ì°¨íŠ¸**: íˆíŠ¸ë§µ, ë„¤íŠ¸ì›Œí¬, ë³µì¡í•œ ì‹œê°í™”

#### 3. Victory (ê³ ê¸‰)
```bash
npm install victory @types/victory
```
- **ìš©ë„**: React ë°ì´í„° ì‹œê°í™”
- **íŠ¹ì§•**: ì• ë‹ˆë©”ì´ì…˜ê³¼ ì¸í„°ë™ì…˜
- **ì í•©í•œ ì°¨íŠ¸**: ë™ì  ì°¨íŠ¸, ê²Œì„í™” ìš”ì†Œ

#### 4. Nivo (ê³ ê¸‰)
```bash
npm install @nivo/core @nivo/line @nivo/bar @nivo/pie @nivo/heatmap
```
- **ìš©ë„**: React ê¸°ë°˜ ê³ ê¸‰ ì°¨íŠ¸
- **íŠ¹ì§•**: ë°˜ì‘í˜• ë””ìì¸, ì ‘ê·¼ì„±
- **ì í•©í•œ ì°¨íŠ¸**: ëª¨ë“  ì¢…ë¥˜ì˜ ì°¨íŠ¸

### ë°ì´í„° ì²˜ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

#### 1. Lodash
```bash
npm install lodash @types/lodash
```
- **ìš©ë„**: ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ëª¨ìŒ
- **íŠ¹ì§•**: ë°°ì—´, ê°ì²´, ë¬¸ìì—´ ì²˜ë¦¬
- **í™œìš©**: ë°ì´í„° ë³€í™˜, í•„í„°ë§, ê·¸ë£¹í•‘

#### 2. Simple Statistics
```bash
npm install simple-statistics
```
- **ìš©ë„**: í†µê³„ ê³„ì‚° ë¼ì´ë¸ŒëŸ¬ë¦¬
- **íŠ¹ì§•**: í‰ê· , í‘œì¤€í¸ì°¨, ìƒê´€ê´€ê³„ ë“±
- **í™œìš©**: ë°ì´í„° ë¶„ì„, ì¸ì‚¬ì´íŠ¸ ìƒì„±

#### 3. XLSX
```bash
npm install xlsx
```
- **ìš©ë„**: Excel íŒŒì¼ ì²˜ë¦¬
- **íŠ¹ì§•**: ì½ê¸°/ì“°ê¸° ì§€ì›
- **í™œìš©**: ë°ì´í„° ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸°

## ğŸ“ˆ íŒ¨í‚¤ì§€ë³„ í™œìš© ì˜ˆì œ

### 1. Recharts í™œìš©

#### ê¸°ë³¸ ì„ í˜• ì°¨íŠ¸
```typescript
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from 'recharts';

const data = [
  { month: '2024-01', amount: 50000 },
  { month: '2024-02', amount: 65000 },
  { month: '2024-03', amount: 45000 },
];

function MonthlyTrendChart() {
  return (
    <LineChart width={600} height={300} data={data}>
      <CartesianGrid strokeDasharray="3 3" />
      <XAxis dataKey="month" />
      <YAxis />
      <Tooltip />
      <Legend />
      <Line type="monotone" dataKey="amount" stroke="#8884d8" />
    </LineChart>
  );
}
```

#### ì›í˜• ì°¨íŠ¸
```typescript
import { PieChart, Pie, Cell, Tooltip } from 'recharts';

const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042'];

function CategoryPieChart({ data }) {
  return (
    <PieChart width={400} height={400}>
      <Pie
        data={data}
        cx={200}
        cy={200}
        labelLine={false}
        label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}
        outerRadius={80}
        fill="#8884d8"
        dataKey="value"
      >
        {data.map((entry, index) => (
          <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
        ))}
      </Pie>
      <Tooltip />
    </PieChart>
  );
}
```

### 2. D3.js í™œìš©

#### íˆíŠ¸ë§µ ìƒì„±
```typescript
import * as d3 from 'd3';

function createHeatmap(data, containerId) {
  const margin = { top: 20, right: 20, bottom: 30, left: 40 };
  const width = 600 - margin.left - margin.right;
  const height = 400 - margin.top - margin.bottom;

  const svg = d3.select(`#${containerId}`)
    .append('svg')
    .attr('width', width + margin.left + margin.right)
    .attr('height', height + margin.top + margin.bottom)
    .append('g')
    .attr('transform', `translate(${margin.left},${margin.top})`);

  const xScale = d3.scaleBand()
    .domain(data.map(d => d.month))
    .range([0, width]);

  const yScale = d3.scaleLinear()
    .domain([0, d3.max(data, d => d.value)])
    .range([height, 0]);

  const colorScale = d3.scaleSequential()
    .domain([0, d3.max(data, d => d.value)])
    .interpolator(d3.interpolateBlues);

  svg.selectAll('rect')
    .data(data)
    .enter()
    .append('rect')
    .attr('x', d => xScale(d.month))
    .attr('y', d => yScale(d.value))
    .attr('width', xScale.bandwidth())
    .attr('height', d => height - yScale(d.value))
    .attr('fill', d => colorScale(d.value));
}
```

### 3. Victory í™œìš©

#### ì• ë‹ˆë©”ì´ì…˜ ì°¨íŠ¸
```typescript
import { VictoryChart, VictoryLine, VictoryTheme, VictoryAxis } from 'victory';

function AnimatedLineChart({ data }) {
  return (
    <VictoryChart theme={VictoryTheme.material}>
      <VictoryAxis
        tickFormat={(t) => t}
        style={{
          tickLabels: { fontSize: 8, angle: -45 }
        }}
      />
      <VictoryAxis
        dependentAxis
        tickFormat={(t) => `${t}ì›`}
      />
      <VictoryLine
        data={data}
        x="month"
        y="amount"
        style={{
          data: { stroke: "#c43a31" },
          parent: { border: "1px solid #ccc" }
        }}
        animate={{
          duration: 2000,
          onLoad: { duration: 1000 }
        }}
      />
    </VictoryChart>
  );
}
```

### 4. Nivo í™œìš©

#### ë°˜ì‘í˜• ì°¨íŠ¸
```typescript
import { ResponsiveLine } from '@nivo/line';

function ResponsiveLineChart({ data }) {
  return (
    <ResponsiveLine
      data={[
        {
          id: 'ì§€ì¶œ',
          data: data.map(item => ({
            x: item.month,
            y: item.amount
          }))
        }
      ]}
      margin={{ top: 50, right: 110, bottom: 50, left: 60 }}
      xScale={{ type: 'point' }}
      yScale={{ type: 'linear', min: 'auto', max: 'auto' }}
      axisTop={null}
      axisRight={null}
      axisBottom={{
        tickSize: 5,
        tickPadding: 5,
        tickRotation: 0,
        legend: 'ì›”',
        legendOffset: 36,
        legendPosition: 'middle'
      }}
      axisLeft={{
        tickSize: 5,
        tickPadding: 5,
        tickRotation: 0,
        legend: 'ì§€ì¶œ (ì›)',
        legendOffset: -40,
        legendPosition: 'middle'
      }}
      pointSize={10}
      pointColor={{ theme: 'background' }}
      pointBorderWidth={2}
      pointBorderColor={{ from: 'serieColor' }}
      pointLabelYOffset={-12}
      useMesh={true}
      legends={[
        {
          anchor: 'bottom-right',
          direction: 'column',
          justify: false,
          translateX: 100,
          translateY: 0,
          itemsSpacing: 0,
          itemDirection: 'left-to-right',
          itemWidth: 80,
          itemHeight: 20,
          itemsSymbolSize: 12,
          itemTextColor: '#999',
          symbolSize: 12,
          symbolShape: 'circle'
        }
      ]}
    />
  );
}
```

## ğŸ”§ ë°ì´í„° ì²˜ë¦¬ í™œìš©

### 1. Lodash í™œìš©

#### ë°ì´í„° ê·¸ë£¹í•‘
```typescript
import _ from 'lodash';

// ì¹´í…Œê³ ë¦¬ë³„ ê·¸ë£¹í•‘
const groupedByCategory = _.groupBy(subscriptions, 'category');

// ì›”ë³„ ì§€ì¶œ í•©ê³„
const monthlyTotals = _.mapValues(
  _.groupBy(subscriptions, 'month'),
  items => _.sumBy(items, 'amount')
);

// ìƒìœ„ ì¹´í…Œê³ ë¦¬ ì°¾ê¸°
const topCategories = _.orderBy(
  Object.entries(groupedByCategory).map(([category, items]) => ({
    category,
    total: _.sumBy(items, 'amount'),
    count: items.length
  })),
  'total',
  'desc'
).slice(0, 5);
```

### 2. Simple Statistics í™œìš©

#### í†µê³„ ë¶„ì„
```typescript
import ss from 'simple-statistics';

// ê¸°ë³¸ í†µê³„
const amounts = subscriptions.map(s => s.amount);
const mean = ss.mean(amounts);
const median = ss.median(amounts);
const standardDeviation = ss.standardDeviation(amounts);

// ì„±ì¥ë¥  ê³„ì‚°
const growthRates = [];
for (let i = 1; i < monthlyData.length; i++) {
  const growth = ((monthlyData[i].amount - monthlyData[i-1].amount) / monthlyData[i-1].amount) * 100;
  growthRates.push(growth);
}

const averageGrowth = ss.mean(growthRates);
const growthTrend = ss.linearRegression(growthRates.map((rate, index) => [index, rate]));
```

### 3. XLSX í™œìš©

#### Excel ë‚´ë³´ë‚´ê¸°
```typescript
import * as XLSX from 'xlsx';

function exportToExcel(data, filename) {
  // ì›Œí¬ë¶ ìƒì„±
  const wb = XLSX.utils.book_new();
  
  // ë°ì´í„°ë¥¼ ì›Œí¬ì‹œíŠ¸ë¡œ ë³€í™˜
  const ws = XLSX.utils.json_to_sheet(data);
  
  // ì›Œí¬ì‹œíŠ¸ë¥¼ ì›Œí¬ë¶ì— ì¶”ê°€
  XLSX.utils.book_append_sheet(wb, ws, 'Statistics');
  
  // íŒŒì¼ ë‹¤ìš´ë¡œë“œ
  XLSX.writeFile(wb, `${filename}.xlsx`);
}

// ì‚¬ìš© ì˜ˆì œ
const statisticsData = [
  { category: 'ì—”í„°í…Œì¸ë¨¼íŠ¸', amount: 50000, count: 3 },
  { category: 'ìŒì•…', amount: 30000, count: 2 },
  { category: 'ê°œë°œ', amount: 80000, count: 4 }
];

exportToExcel(statisticsData, 'subscription-statistics');
```

## ğŸ¨ ê³ ê¸‰ ì‹œê°í™” ì˜ˆì œ

### 1. ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
```typescript
import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from './ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';

function StatisticsDashboard() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadStatistics();
  }, []);

  const loadStatistics = async () => {
    try {
      setLoading(true);
      // ë°ì´í„° ë¡œë”© ë¡œì§
      const statistics = await fetchStatistics();
      setData(statistics);
    } catch (error) {
      console.error('í†µê³„ ë¡œë”© ì‹¤íŒ¨:', error);
    } finally {
      setLoading(false);
    }
  };

  if (loading) {
    return <div>ë¡œë”© ì¤‘...</div>;
  }

  return (
    <div className="p-6">
      <h1 className="text-3xl font-bold mb-6">í†µê³„ ëŒ€ì‹œë³´ë“œ</h1>
      
      <Tabs defaultValue="overview" className="space-y-4">
        <TabsList>
          <TabsTrigger value="overview">ê°œìš”</TabsTrigger>
          <TabsTrigger value="charts">ì°¨íŠ¸</TabsTrigger>
          <TabsTrigger value="analysis">ë¶„ì„</TabsTrigger>
        </TabsList>
        
        <TabsContent value="overview">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <Card>
              <CardHeader>
                <CardTitle>ì´ ì§€ì¶œ</CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-2xl font-bold">
                  {data?.totalSpending?.toLocaleString()}ì›
                </p>
              </CardContent>
            </Card>
            {/* ì¶”ê°€ ì¹´ë“œë“¤ */}
          </div>
        </TabsContent>
        
        <TabsContent value="charts">
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <Card>
              <CardHeader>
                <CardTitle>ì›”ë³„ íŠ¸ë Œë“œ</CardTitle>
              </CardHeader>
              <CardContent>
                <MonthlyTrendChart data={data?.monthlyTrends} />
              </CardContent>
            </Card>
            
            <Card>
              <CardHeader>
                <CardTitle>ì¹´í…Œê³ ë¦¬ ë¶„í¬</CardTitle>
              </CardHeader>
              <CardContent>
                <CategoryPieChart data={data?.categoryStats} />
              </CardContent>
            </Card>
          </div>
        </TabsContent>
        
        <TabsContent value="analysis">
          <div className="space-y-4">
            <Card>
              <CardHeader>
                <CardTitle>ì¸ì‚¬ì´íŠ¸</CardTitle>
              </CardHeader>
              <CardContent>
                <ul className="space-y-2">
                  {data?.insights?.map((insight, index) => (
                    <li key={index} className="flex items-center gap-2">
                      <span className="w-2 h-2 bg-blue-500 rounded-full"></span>
                      {insight}
                    </li>
                  ))}
                </ul>
              </CardContent>
            </Card>
          </div>
        </TabsContent>
      </Tabs>
    </div>
  );
}
```

### 2. ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
```typescript
import { useEffect, useState } from 'react';

function RealTimeStatistics() {
  const [data, setData] = useState(null);
  const [lastUpdate, setLastUpdate] = useState(null);

  useEffect(() => {
    // ì‹¤ì‹œê°„ êµ¬ë… ì„¤ì •
    const unsubscribe = subscribeToStatistics(userId, (newData) => {
      setData(newData);
      setLastUpdate(new Date());
    });

    return () => unsubscribe();
  }, [userId]);

  return (
    <div>
      <div className="flex items-center justify-between mb-4">
        <h2 className="text-xl font-semibold">ì‹¤ì‹œê°„ í†µê³„</h2>
        {lastUpdate && (
          <span className="text-sm text-gray-500">
            ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: {lastUpdate.toLocaleTimeString()}
          </span>
        )}
      </div>
      
      {/* ì‹¤ì‹œê°„ ì°¨íŠ¸ë“¤ */}
    </div>
  );
}
```

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### 1. ì°¨íŠ¸ ìµœì í™”
```typescript
// ë©”ëª¨ì´ì œì´ì…˜ì„ í†µí•œ ì„±ëŠ¥ ìµœì í™”
import { useMemo } from 'react';

function OptimizedChart({ data }) {
  const processedData = useMemo(() => {
    return data.map(item => ({
      ...item,
      formattedAmount: item.amount.toLocaleString()
    }));
  }, [data]);

  return <LineChart data={processedData} />;
}
```

### 2. ë°ì´í„° ìºì‹±
```typescript
const statisticsCache = new Map();

async function getCachedStatistics(key, fetchFunction) {
  if (statisticsCache.has(key)) {
    const cached = statisticsCache.get(key);
    if (Date.now() - cached.timestamp < 5 * 60 * 1000) { // 5ë¶„ ìºì‹œ
      return cached.data;
    }
  }
  
  const data = await fetchFunction();
  statisticsCache.set(key, {
    data,
    timestamp: Date.now()
  });
  
  return data;
}
```

## ğŸ“Š íŒ¨í‚¤ì§€ ì„ íƒ ê°€ì´ë“œ

### ìš©ë„ë³„ ì¶”ì²œ

#### 1. ê¸°ë³¸ ì°¨íŠ¸ (Recharts)
- **ì í•©í•œ ê²½ìš°**: ë¹ ë¥¸ ê°œë°œ, ê°„ë‹¨í•œ ì°¨íŠ¸
- **ì¥ì **: ì‰¬ìš´ í•™ìŠµ ê³¡ì„ , React ì¹œí™”ì 
- **ë‹¨ì **: ë³µì¡í•œ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì œí•œ

#### 2. ê³ ê¸‰ ì‹œê°í™” (D3.js)
- **ì í•©í•œ ê²½ìš°**: ë³µì¡í•œ ì‹œê°í™”, ì™„ì „í•œ ì œì–´
- **ì¥ì **: ë¬´í•œí•œ ì»¤ìŠ¤í„°ë§ˆì´ì§•, ê°•ë ¥í•œ ê¸°ëŠ¥
- **ë‹¨ì **: ë†’ì€ í•™ìŠµ ê³¡ì„ , ë³µì¡í•œ ì½”ë“œ

#### 3. ì• ë‹ˆë©”ì´ì…˜ ì°¨íŠ¸ (Victory)
- **ì í•©í•œ ê²½ìš°**: ë™ì  ì°¨íŠ¸, ê²Œì„í™” ìš”ì†Œ
- **ì¥ì **: ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜, ì¸í„°ë™ì…˜
- **ë‹¨ì **: ë²ˆë“¤ í¬ê¸°, ë³µì¡í•œ ì„¤ì •

#### 4. ë°˜ì‘í˜• ì°¨íŠ¸ (Nivo)
- **ì í•©í•œ ê²½ìš°**: ëª¨ë°”ì¼ ìµœì í™”, ì ‘ê·¼ì„±
- **ì¥ì **: ìë™ ë°˜ì‘í˜•, ì ‘ê·¼ì„± ì§€ì›
- **ë‹¨ì **: ì œí•œëœ ì»¤ìŠ¤í„°ë§ˆì´ì§•

## ğŸ”§ ì„¤ì • ë° í™˜ê²½

### 1. TypeScript ì„¤ì •
```json
{
  "compilerOptions": {
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true
  }
}
```

### 2. ë²ˆë“¤ ìµœì í™”
```javascript
// vite.config.js
export default {
  optimizeDeps: {
    include: ['d3', 'lodash', 'simple-statistics']
  }
}
```

## ğŸ“ ëª¨ë²” ì‚¬ë¡€

### 1. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/charts/
â”œâ”€â”€ ChartContainer.tsx      // ì°¨íŠ¸ ë˜í¼
â”œâ”€â”€ RechartsCharts.tsx     // Recharts ì°¨íŠ¸ë“¤
â”œâ”€â”€ D3Charts.tsx          // D3 ì°¨íŠ¸ë“¤
â”œâ”€â”€ VictoryCharts.tsx     // Victory ì°¨íŠ¸ë“¤
â””â”€â”€ NivoCharts.tsx        // Nivo ì°¨íŠ¸ë“¤
```

### 2. ë°ì´í„° ì²˜ë¦¬
```typescript
// utils/chartData.ts
export function processChartData(rawData) {
  // ë°ì´í„° ì „ì²˜ë¦¬ ë¡œì§
}

export function createChartConfig(type) {
  // ì°¨íŠ¸ íƒ€ì…ë³„ ì„¤ì •
}
```

### 3. ì—ëŸ¬ ì²˜ë¦¬
```typescript
function SafeChart({ data, fallback }) {
  if (!data || data.length === 0) {
    return fallback || <div>ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>;
  }
  
  try {
    return <Chart data={data} />;
  } catch (error) {
    console.error('ì°¨íŠ¸ ë Œë”ë§ ì‹¤íŒ¨:', error);
    return <div>ì°¨íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>;
  }
}
```

---

*ì´ ê°€ì´ë“œëŠ” SMS V.3.0ì˜ í†µê³„ íŒ¨í‚¤ì§€ í™œìš©ì„ ìœ„í•œ ì™„ì „í•œ ì°¸ì¡° ìë£Œì…ë‹ˆë‹¤.* 